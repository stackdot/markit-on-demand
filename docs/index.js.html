<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>index.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="MarkitOnDemand.html">MarkitOnDemand</a><ul class='methods'><li data-type='method'><a href="MarkitOnDemand.html#getQuote">getQuote</a></li><li data-type='method'><a href="MarkitOnDemand.html#lookup">lookup</a></li><li data-type='method'><a href="MarkitOnDemand.html#lookupUrl">lookupUrl</a></li><li data-type='method'><a href="MarkitOnDemand.html#quoteUrl">quoteUrl</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>'use strict'



// Required Modules:
const colors 		= require('colors')
const debug 		= require('debug')('markit-on-demand:main')
const lodash 		= require('lodash')
const Q 			= require('q')
const request		= require('request')
const async			= require('async')



// Static Params:
const BASE_URL 		= 'http://dev.markitondemand.com/MODApis/Api/v2/'



/**
 *  MarkitOnDemand Class
 */
class MarkitOnDemand {



	/**
	 *  Constructor
	 *  @param  {Object} params Params to be set into this instance
	 *  @return {MarkitOnDemand}        MarkitOnDemand instance
	 */
	constructor( params ){

		debug('Instance Created:', params)
		this.params = params

		console.log('instance created')

		return this

	}



	/**
	 *  Get stock quote for a Symbol
	 *  @param  {String} symbol 	Stock symbol
	 *  @return {Promise}        	Promise
	 */
	getQuote( symbol ){
		const deferred = Q.defer()
		request({
			url: this.quoteUrl( query ),
			json: true
		}, ( err, res, body ) => {
			if( err ) return deferred.reject( err )
			if( res.statusCode != 200 ) return deferred.reject( new Error('Status code non 200: '+res.statusCode ) )
			deferred.resolve( body )
		})
		return deferred.promise
	}



	/**
	 *  Lookup a stock symbol via a query string
	 *  @param  {String} query 		Query which to search for symbols on
	 *  @return {Promise}       	Promise
	 */
	lookup( query ){
		const deferred = Q.defer()
		request({
			url: this.lookupUrl( query ),
			json: true
		}, ( err, res, body ) => {
			if( err ) return deferred.reject( err )
			if( res.statusCode != 200 ) return deferred.reject( new Error('Status code non 200: '+res.statusCode ) )
			deferred.resolve( body )
		})
		return deferred.promise
	}



	/**
	 *  Generate the URL for Symbol Lookups
	 *  @param  {String} query 		Search query to lookup symbols by
	 *  @return {String}        	URL to call to find symbol data
	 */
	lookupUrl( query ){
		return `${BASE_URL}Lookup/json?input=${query}`
	}



	/**
	 *  Generate the URL for Quote Lookup
	 *  @param  {String} symbol 	Stock symbol
	 *  @return {String}        	URL to get quote data
	 */
	quoteUrl( symbol ){
		return `${BASE_URL}Quote/json?symbol=${symbol}`
	}



}



/**
 *  Export
 *  @param  {Object} 	params 	MarkitOnDemand library params
 *  @return {MarkitOnDemand}        New instance of the MarkitOnDemand library
 */
module.exports = new MarkitOnDemand()
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.0</a> on Tue Aug 30 2016 09:23:35 GMT-0400 (EDT) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
